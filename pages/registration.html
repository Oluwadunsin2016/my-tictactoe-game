<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration</title>
    <link rel="stylesheet" href="../css/log.css" />

    <!-- Font_Awesome -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />

      <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/images/icons/icon-96x48.png" />
    <meta name="apple-mobile-web-app-status-bar" content="#FFE1C4" />
    <meta name="theme-color" content="#FFE1C4" />
  </head>
  <body>
    <div class="container col-8 col-md-5 text-center my-4 shadow">
      <h2 class="mb-4">Sign Up</h2>
      <form class="col-10 mx-auto registration">
        <input
          type="text"
          class="form-control my-3"
          name="firstName"
          placeholder="First Name"
        />
        <input
          type="text"
          class="form-control my-3"
          name="lastName"
          placeholder="Last Name"
        />
        <input
          type="password"
          class="form-control my-3"
          name="password"
          placeholder="Password"
        />
        <button type="submit" class="mt-2 btn btn-primary">Submit</button>
        <p class="mt-4">
          Already have an account? <a href="../index.html">Login Here</a>
        </p>
      </form>
    </div>

    <script>
      const regForm = document.querySelector(".registration");

      regForm.addEventListener("submit", (e) => {
        e.preventDefault();
        let player = {
          firstname: regForm.firstName.value.trim().toLowerCase(),
          lastname: regForm.lastName.value.trim().toLowerCase(),
          password: regForm.password.value.trim().toLowerCase(),
        };
        if (localStorage.registeredPlayers) {
          let currentPlayers = JSON.parse(
            localStorage.getItem("registeredPlayers")
          );
          console.log(currentPlayers);
          player.id = currentPlayers.length + 1;
          currentPlayers = [...currentPlayers, player];
          localStorage.setItem(
            "registeredPlayers",
            JSON.stringify(currentPlayers)
          );
        } else {
          player.id = 1;
          let players = [];
          players.push(player);
          localStorage.setItem("registeredPlayers", JSON.stringify(players));
          console.log(players);
        }
        regForm.reset();
        // location.href = "http://127.0.0.1:5503/index.html";
        location.href = "https://my-tictactoe-game.vercel.app/index.html";
      });
    </script>
  </body>
</html>
